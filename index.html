<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... your existing head content, Tailwind, fonts, Firebase SDK ... -->
    <!-- Keep Firebase config and imports as-is -->
</head>
<body>

    <header class="bg-[#0070D1] pt-12 pb-24 px-8 mb-[-4rem] rounded-b-[4rem] relative overflow-hidden">
        <!-- Existing header content -->
        <div class="flex justify-between items-start relative z-10">
            <div>
                <!-- ... title ... -->
            </div>
            <div class="w-24 h-24 mt-[-1rem] cursor-pointer" onclick="rackyTalk()">
                <img src="60117.jpg" alt="Racky" class="w-full h-full object-contain drop-shadow-2xl floating-racky">
            </div>
        </div>

        <!-- Add Login Button here -->
        <button onclick="switchView('login')" class="absolute top-6 right-8 bg-white/90 text-[#0070D1] px-6 py-3 rounded-full font-bold shadow-md hover:bg-white transition-all">
            Login / Hub
        </button>

        <!-- Racky speech bubble -->
        <div id="racky-speech" class="absolute -bottom-10 right-8 bg-white p-4 rounded-2xl rounded-tr-none shadow-xl opacity-0 transition-all duration-300 pointer-events-none z-50">
            <p id="racky-msg" class="text-[11px] font-bold text-slate-800 leading-tight"></p>
        </div>
    </header>

    <main id="view-container" class="pb-32">

        <!-- Login View (hidden by default) -->
        <section id="view-login" class="view-section px-6 py-12 hidden">
            <div class="glass-card p-10 max-w-md mx-auto">
                <h2 class="text-3xl font-black text-center mb-8">Sign In</h2>
                <p class="text-center text-slate-500 mb-8">Trainer Hub or your Pro-Path</p>
                
                <div class="space-y-6">
                    <input type="email" id="login-email" placeholder="Email" class="w-full p-5 rounded-2xl bg-white border border-slate-100 text-sm font-semibold shadow-sm focus:ring-2 focus:ring-blue-200 outline-none">
                    <input type="password" id="login-password" placeholder="Password" class="w-full p-5 rounded-2xl bg-white border border-slate-100 text-sm font-semibold shadow-sm focus:ring-2 focus:ring-blue-200 outline-none">
                    <button onclick="loginUser()" class="w-full btn-primary">Sign In</button>
                    <button onclick="switchView('landing')" class="w-full text-center text-slate-500 mt-4">Back to Enrollment</button>
                </div>
            </div>
        </section>

        <!-- Trainer Hub -->
        <section id="view-trainer" class="view-section px-6 hidden">
            <!-- Your existing roster + venue selector -->
            <button onclick="logoutUser()" class="mt-8 w-full bg-red-500 text-white py-4 rounded-2xl font-bold">Logout</button>
        </section>

        <!-- Student Pro-Path -->
        <section id="view-student" class="view-section px-6 hidden">
            <!-- Your existing student card -->
            <button onclick="logoutUser()" class="mt-8 w-full bg-red-500 text-white py-4 rounded-2xl font-bold">Logout</button>
        </section>

        <!-- Landing + Enrollment (default visible) -->
        <section id="view-landing" class="view-section active p-6">
            <div class="glass-card p-10 mb-6">
                <div class="inline-block px-4 py-1.5 mb-6 text-[10px] font-black tracking-widest text-white uppercase bg-[#0070D1] rounded-full">Elite Training</div>
                <h1 class="text-6xl font-extrabold text-[#1A1A1A] leading-[0.85] tracking-tighter mb-8 italic">MASTER <br/> <span class="text-[#0070D1]">THE COURT.</span></h1>
                <p class="text-slate-500 text-sm leading-relaxed mb-10 font-medium">Professional coaching for all levels, driven by the <span class="text-slate-900 font-bold">Pro-Path</span> data system.</p>
                <button onclick="switchView('trainer')" class="w-full btn-primary text-sm">Open Trainer Hub</button>
            </div>

            <!-- Pivotal Enrollment Form - fully restored -->
            <div class="px-2 pb-12">
                <h3 class="text-xl font-black text-slate-900 mb-6 ml-2">Pilot Enrollment</h3>
                <div class="space-y-4">
                    <input type="text" id="parent-name" placeholder="Full Name (Player/Guardian)" class="w-full p-5 rounded-2xl bg-white border border-slate-100 text-sm font-semibold shadow-sm focus:ring-2 focus:ring-blue-200 outline-none">
                    <input type="text" id="child-name" placeholder="Player Name" class="w-full p-5 rounded-2xl bg-white border border-slate-100 text-sm font-semibold shadow-sm focus:ring-2 focus:ring-blue-200 outline-none">
                    <div class="flex gap-4">
                        <input type="number" id="child-age" placeholder="Age" class="w-1/3 p-5 rounded-2xl bg-white border border-slate-100 text-sm font-semibold shadow-sm focus:ring-2 focus:ring-blue-200 outline-none">
                        <select id="child-skill" class="w-2/3 p-5 rounded-2xl bg-white border border-slate-100 text-sm font-semibold shadow-sm focus:ring-2 focus:ring-blue-200 outline-none appearance-none">
                            <option value="" disabled selected>Experience Level</option>
                            <option value="Foundation">Foundation (Beginner)</option>
                            <option value="Competitive">Competitive (Intermediate)</option>
                            <option value="Elite">Elite (Advanced)</option>
                        </select>
                    </div>
                    <select id="session-time" class="w-full p-5 rounded-2xl bg-white border border-slate-100 text-sm font-semibold shadow-sm focus:ring-2 focus:ring-blue-200 outline-none appearance-none">
                        <option value="" disabled selected>Preferred Time Slot</option>
                        <option value="Monday 4:00 PM">Monday 4:00 PM</option>
                        <option value="Wednesday 5:00 PM">Wednesday 5:00 PM</option>
                        <!-- Add more slots as needed -->
                    </select>
                    <input type="tel" id="parent-phone" placeholder="WhatsApp Number" class="w-full p-5 rounded-2xl bg-white border border-slate-100 text-sm font-semibold shadow-sm focus:ring-2 focus:ring-blue-200 outline-none">
                    <button onclick="processInquiry()" class="w-full btn-primary flex items-center justify-center gap-3 mt-4">Confirm Baseline Session üéæ</button>
                </div>
            </div>
        </section>
    </main>

    <nav id="bottom-nav" class="bottom-nav fixed flex justify-around items-center py-5 z-40 hidden">
        <button onclick="switchView('landing')" class="p-2">üè†</button>
        <button onclick="switchView('trainer')" class="p-2">üìã</button>
        <button onclick="switchView('student')" class="p-2">üìà</button>
    </nav>

<script>
    let students = [];
    let activeVenueLink = "https://maps.google.com/?q=Main+Club";
    let currentUser = null;

    function switchView(viewId) {
        document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
        document.getElementById('view-' + viewId).classList.add('active');
        const nav = document.getElementById('bottom-nav');
        nav.classList.toggle('hidden', !currentUser);
        window.scrollTo(0,0);
    }

    function loginUser() {
        const email = document.getElementById('login-email').value.trim();
        const password = document.getElementById('login-password').value.trim();

        if (!email || !password) {
            rackyTalk("Enter email and password!");
            return;
        }

        let role = email.includes('trainer') || email.endsWith('@trainer.com') ? 'trainer' : 'student';
        currentUser = { email, role };
        localStorage.setItem('padelUser', JSON.stringify(currentUser));

        rackyTalk(`Welcome, ${role}!`);
        setTimeout(() => switchView(role === 'trainer' ? 'trainer' : 'student'), 1200);
    }

    function logoutUser() {
        currentUser = null;
        localStorage.removeItem('padelUser');
        rackyTalk("Logged out successfully.");
        switchView('landing');
    }

    // ... Keep your processInquiry(), renderRoster(), rackyTalk(), updateVenue(), listenToStudents() functions unchanged ...

    window.addEventListener('load', () => {
        const saved = localStorage.getItem('padelUser');
        if (saved) {
            currentUser = JSON.parse(saved);
            switchView(currentUser.role === 'trainer' ? 'trainer' : 'student');
            if (currentUser.role === 'trainer') listenToStudents(); // only trainers see roster updates
        } else {
            switchView('landing');
        }
        rackyTalk("Welcome to PadelPilotPro!");
    });
</script>
</body>
</html>
