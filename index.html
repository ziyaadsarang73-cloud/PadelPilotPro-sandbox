<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PadelPilot | Coach Hub Functional</title>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;500;800&display=swap');
        
        body { background-color: #F8FAFC; color: #1E293B; font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; overflow: hidden; }
        .app-container { height: 100vh; display: flex; flex-direction: column; }
        .app-content { flex: 1; overflow-y: auto; padding-bottom: 120px; }
        
        /* Studio White Elements */
        .glass-card { background: #FFFFFF; border-radius: 1.5rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03), 0 0 1px rgba(0,0,0,0.1); padding: 1.25rem; margin-bottom: 1rem; }
        
        /* Navigation */
        .tab-view { display: none; }
        .tab-view.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .nav-dock { position: fixed; bottom: 0; width: 100%; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px); border-top: 1px solid rgba(0,0,0,0.05); display: grid; grid-template-columns: repeat(5, 1fr); padding: 12px 0 25px 0; z-index: 1000; }
        .nav-btn { display: flex; flex-direction: column; align-items: center; gap: 4px; color: #94A3B8; transition: 0.3s; background: none; border: none; outline: none; }
        .nav-btn.active { color: #2563EB; }

        /* UI Helpers */
        .btn-blue { background: #2563EB; color: white; padding: 12px; border-radius: 12px; font-weight: 800; font-size: 12px; width: 100%; text-transform: uppercase; }
        input, textarea { background: #F1F5F9; border: none; padding: 12px; border-radius: 10px; font-size: 14px; width: 100%; outline: none; }
    </style>
</head>
<body>

    <div class="app-container">
        <header class="px-6 py-6 flex justify-between items-center bg-white border-b border-slate-100">
            <div>
                <h1 id="viewTitle" class="text-xl font-extrabold tracking-tight text-slate-900 uppercase">Coach <span class="text-blue-600">Hub</span></h1>
                <p id="viewSubtitle" class="text-[9px] font-bold text-slate-400 uppercase tracking-widest">Business Suite</p>
            </div>
            <div class="flex gap-2">
                 <button onclick="switchTab('hub')" class="w-10 h-10 bg-slate-50 rounded-full flex items-center justify-center border border-slate-100">ü§ñ</button>
            </div>
        </header>

        <div class="app-content px-5 pt-4">
            
            <div id="view-business" class="tab-view active">
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="glass-card">
                        <p class="text-[9px] font-bold text-slate-400 uppercase">Revenue (MTD)</p>
                        <p class="text-xl font-black text-slate-900" id="stat-revenue">R 0</p>
                    </div>
                    <div class="glass-card">
                        <p class="text-[9px] font-bold text-slate-400 uppercase">Outstanding</p>
                        <p class="text-xl font-black text-red-500" id="stat-unpaid">R 0</p>
                    </div>
                </div>

                <div class="glass-card">
                    <h3 class="text-xs font-black uppercase mb-3">Calendar Reminders</h3>
                    <div id="reminderList" class="space-y-2 mb-3">
                        <p class="text-[10px] text-slate-400 italic">No reminders for today.</p>
                    </div>
                    <div class="flex gap-2">
                        <input type="text" id="remInput" placeholder="Add note...">
                        <button onclick="addReminder()" class="w-12 bg-slate-100 rounded-xl">+</button>
                    </div>
                </div>

                <div class="glass-card">
                    <h3 class="text-xs font-black uppercase mb-3">Broadcast Message</h3>
                    <textarea id="bcInput" class="mb-3 h-20" placeholder="Type group update here..."></textarea>
                    <div class="flex gap-2">
                        <button onclick="broadcast('All')" class="btn-blue flex-1">Send to All</button>
                        <button onclick="broadcast('Unpaid')" class="btn-blue flex-1 bg-slate-800">Nudge Unpaid</button>
                    </div>
                </div>
            </div>

            <div id="view-students" class="tab-view">
                <div class="flex gap-2 mb-4">
                    <input type="text" id="stdName" placeholder="Student Name">
                    <input type="number" id="stdPrice" placeholder="Price" class="w-24">
                    <button onclick="addStudent()" class="bg-blue-600 text-white px-4 rounded-xl font-bold">+</button>
                </div>
                <div id="rosterList" class="space-y-3">
                    </div>
            </div>

            <div id="view-arena" class="tab-view pt-20 text-center opacity-30 italic">Arena Controller (Active)</div>
            <div id="view-tourney" class="tab-view pt-20 text-center opacity-30 italic">Tournament Engine (Standby)</div>
            <div id="view-hub" class="tab-view pt-20 text-center opacity-30 italic">Racky AI Assistant</div>
        </div>

        <nav class="nav-dock">
            <button onclick="switchTab('arena')" class="nav-btn" id="nav-arena"><span>üéæ</span><span class="text-[8px] font-bold uppercase">Arena</span></button>
            <button onclick="switchTab('business')" class="nav-btn active" id="nav-business"><span>üìä</span><span class="text-[8px] font-bold uppercase">Hub</span></button>
            <button onclick="switchTab('students')" class="nav-btn" id="nav-students"><span>üë•</span><span class="text-[8px] font-bold uppercase">Students</span></button>
            <button onclick="switchTab('tourney')" class="nav-btn" id="nav-tourney"><span>üèÜ</span><span class="text-[8px] font-bold uppercase">Tourney</span></button>
            <button onclick="switchTab('hub')" class="nav-btn" id="nav-hub"><span>ü§ñ</span><span class="text-[8px] font-bold uppercase">Racky</span></button>
        </nav>
    </div>

    <script>
        // --- DATA ENGINE ---
        let appData = {
            students: JSON.parse(localStorage.getItem('pp_students')) || [],
            reminders: JSON.parse(localStorage.getItem('pp_reminders')) || []
        };

        // --- NAVIGATION ---
        function switchTab(id) {
            // UI Toggle
            document.querySelectorAll('.tab-view').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('view-' + id).classList.add('active');
            document.getElementById('nav-' + id).classList.add('active');

            // Header Update
            const titles = { 'business': 'Coach Hub', 'students': 'Student Dojo', 'arena': 'Match Arena', 'tourney': 'Pro Tourney', 'hub': 'Racky AI' };
            document.getElementById('viewTitle').innerHTML = titles[id].split(' ')[0] + ` <span class="text-blue-600">${titles[id].split(' ')[1]}</span>`;
        }

        // --- COACH HUB LOGIC ---
        function addReminder() {
            const input = document.getElementById('remInput');
            if(!input.value) return;
            appData.reminders.push(input.value);
            input.value = '';
            save();
            renderReminders();
        }

        function renderReminders() {
            const list = document.getElementById('reminderList');
            if(appData.reminders.length === 0) {
                list.innerHTML = `<p class="text-[10px] text-slate-400 italic">No reminders for today.</p>`;
                return;
            }
            list.innerHTML = appData.reminders.map((r, i) => `
                <div class="flex justify-between items-center bg-slate-50 p-2 rounded-lg text-xs">
                    <span>${r}</span>
                    <button onclick="deleteRem(${i})" class="text-red-400">‚úï</button>
                </div>
            `).join('');
        }

        function deleteRem(i) { appData.reminders.splice(i,1); save(); renderReminders(); }

        function broadcast(type) {
            const msg = document.getElementById('bcInput').value;
            if(!msg) return alert("Type a message first!");
            alert(`WhatsApping ${type} segments: "${msg}"`);
            document.getElementById('bcInput').value = '';
        }

        // --- STUDENT LOGIC ---
        function addStudent() {
            const name = document.getElementById('stdName').value;
            const price = document.getElementById('stdPrice').value;
            if(!name || !price) return;

            appData.students.push({
                id: Date.now(),
                name: name,
                price: parseFloat(price),
                paid: false,
                notes: ""
            });
            save();
            renderStudents();
            document.getElementById('stdName').value = '';
            document.getElementById('stdPrice').value = '';
        }

        function togglePaid(id) {
            const s = appData.students.find(x => x.id === id);
            s.paid = !s.paid;
            save();
            renderStudents();
        }

        function renderStudents() {
            const list = document.getElementById('rosterList');
            list.innerHTML = appData.students.map(s => `
                <div class="glass-card">
                    <div class="flex justify-between items-center mb-2">
                        <p class="font-extrabold text-sm uppercase">${s.name}</p>
                        <span class="text-xs font-black ${s.paid ? 'text-green-500' : 'text-red-500'}">R ${s.price}</span>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="togglePaid(${s.id})" class="text-[9px] font-bold border border-slate-200 px-3 py-1 rounded-lg uppercase">
                            ${s.paid ? 'Mark Unpaid' : 'Mark Paid'}
                        </button>
                        <button onclick="alert('Sending notes to ${s.name}...')" class="text-[9px] font-bold bg-blue-50 text-blue-600 px-3 py-1 rounded-lg uppercase">Sync Hub</button>
                    </div>
                </div>
            `).join('');
            updateStats();
        }

        function updateStats() {
            const rev = appData.students.filter(s => s.paid).reduce((a, b) => a + b.price, 0);
            const unpaid = appData.students.filter(s => !s.paid).reduce((a, b) => a + b.price, 0);
            document.getElementById('stat-revenue').innerText = `R ${rev}`;
            document.getElementById('stat-unpaid').innerText = `R ${unpaid}`;
        }

        function save() {
            localStorage.setItem('pp_students', JSON.stringify(appData.students));
            localStorage.setItem('pp_reminders', JSON.stringify(appData.reminders));
        }

        // Init
        renderReminders();
        renderStudents();
    </script>
</body>
</html>
